<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>第三章 : Makefile总述</title>
<style>
<!--
h1
	{margin-top:12.0pt;
	margin-right:0pt;
	margin-bottom:12.0pt;
	margin-left:21.6pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-21.6pt;
	page-break-after:avoid;
	tab-stops:list 21.6pt;
	text-autospace:none;
	font-size:16.0pt;
	font-family:Arial;
	}
h2
	{margin-top:12.0pt;
	margin-right:0pt;
	margin-bottom:12.0pt;
	margin-left:28.8pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-28.8pt;
	page-break-after:avoid;
	tab-stops:list 28.8pt;
	text-autospace:none;
	font-size:12.0pt;
	font-family:Arial;
	font-weight:normal}
 p.MsoNormal
	{mso-style-parent:"";
	margin-bottom:.0001pt;
	text-autospace:none;
	font-size:10.0pt;
	font-family:"Times New Roman";
	margin-left:0pt; margin-right:0pt; margin-top:0pt}
p.a
	{margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:150%;
	text-autospace:none;
	border:medium none;
	padding:0pt;
	font-size:9.0pt;
	font-family:Arial;
	margin-left:0pt; margin-right:0pt; margin-top:0pt}
p.MsoBodyTextFirstIndent
	{margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:21.0pt;
	line-height:150%;
	text-autospace:none;
	font-size:10.5pt;
	font-family:Arial;
	margin-left:0pt; margin-right:0pt; margin-top:0pt}
h3
	{margin-top:12.0pt;
	margin-right:0pt;
	margin-bottom:12.0pt;
	margin-left:36.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-36.0pt;
	page-break-after:avoid;
	tab-stops:list 36.0pt;
	text-autospace:none;
	font-size:12.0pt;
	font-family:Arial;
	font-weight:normal}
p.a0
	{margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:18.0pt;
	line-height:150%;
	text-autospace:none;
	border:medium none;
	padding:0pt;
	font-size:9.0pt;
	font-family:Arial;
	margin-left:0pt; margin-right:0pt; margin-top:0pt}
-->
</style>
</head>

<body>

<h1 align="center" style="text-align: center; text-indent: 0pt; margin-left: 0pt">
<a name="chapter_03"><span style="font-size: 18.0pt; font-family: 楷体_GB2312">
第三章：</span><span lang="EN-US" style="font-size: 18.0pt">Makefile </span>
<span style="font-size: 18.0pt; font-family: 楷体_GB2312">总述</span></a></h1>
	<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: #222222">
	<hr size="1" width="100%" align="center">
</span>
<h2><a name="_gnu_make_3.1"><span lang="EN-US" style="font-size: 14.0pt"><b>3.1 Makefile</b></span><b><span style="font-size: 14.0pt; font-family: 楷体_GB2312">的</span></b><span style="font-size: 14.0pt; font-family: 楷体_GB2312">内容</span></a></h2>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
在一个完整的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">中，包含了</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">5</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">个东西：显式规则、隐含规则、变量的定义、指示符和注释。关于“规则”、“变量”和“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">指示符”将在后续的章节进行详细的讨论。本章讨论的是一些基本概念。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 51.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Wingdings">
&sup2;<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
显式规则：它描述了在何种情况下如何更新一个或者多个被称为目标的文件（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的目标文件）。在书写</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">是需要明确地给出目标文件、目标的依赖文件列表以及更新目标文件所需要的命令。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 51.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Wingdings">
&sup2;<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
隐含规则：它是</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">根据此类目标文件的命名（典型的是文件名的后缀）而自动推导出来的规则。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">根据目标文件的名字，自动产生目标的依赖文件并使用默认的命令来对目标进行更新。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 51.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Wingdings">
&sup2;<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
变量定义：就是使用一个字符串代表一段文本串，当定义了变量以后，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">后续在需要使用此文本串的地方，通过引用这个变量来实现对文本串的使用。第一章的的例子中，我们就定义了一个变量“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">objects</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”来表示一个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件列表。关于变量的详细讨论可参考</span><span style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
<span lang="EN-US">
<span lang="EN-US" style="font-family: 楷体_GB2312">第五章</span> Makefile<span lang="EN-US" style="font-family: 楷体_GB2312">中的变量</span></span></span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 51.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Wingdings">
&sup2;<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">指示符：指示符指明在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序读取</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件过程中所要执行的一个动作。其中包括：</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 72.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Wingdings">
&sup2;<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
读取一个文件，读取给定文件名的文件。参考</span>
<span lang="EN-US" style="font-size:12.0pt; line-height:150%; font-family:Arial">
2.3 <span lang="EN-US" style="font-family: 楷体_GB2312">包含其它</span>makefile<span lang="EN-US" style="font-family: 楷体_GB2312">文件</span></span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">一节</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 72.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Wingdings">
&sup2;<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
决定（通常是根据一个变量的得值）处理或者忽略</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">中的某一特定部分。参考</span><span style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
<span lang="EN-US">
<span lang="EN-US" style="font-family: 楷体_GB2312">第六章</span>Makefile<span lang="EN-US" style="font-family: 楷体_GB2312">的条件执行</span></span></span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 72.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Wingdings">
&sup2;<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
定义一个多行变量。参考</span><span style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
<span lang="EN-US">
5.8 <span lang="EN-US" style="font-family: 楷体_GB2312">多行定义</span> </span>
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">一节</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 51.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Wingdings">
&sup2;<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">注释：</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">中“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">#</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”字符后的内容被作为是注释内容（和</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">shell</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">脚本一样）处理。如果此行的第一个非空字符为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">#</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”，那么此行为注释行。注释行的结尾如果存在反斜线（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">\</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">），那么下一行也被作为注释行。一般在书写</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">时推荐将注释作为一个独立的行，而不要和</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的有效行放在一行中书写。当在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">中需要使用字符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">#</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”时，可以使用反斜线加“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">#</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">\#</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">）来实现，其表示将“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">#</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”作为一字符而不是注释的开始标志。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
需要注意的地方：</span></b></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">中第一个规则之后的所有以</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">[Tab]</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">字符开始的的行，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序都会将其给系统的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">shell</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序去解释执行。因此以</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">[Tab]</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">字符开始的注释行也会被交给</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">shell</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">来处理，此命令行是否需要被执行（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">shell</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">执行或者忽略）是由系统</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">shell</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序来判决的。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
另外，在使用指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">define</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”定义一个多行的变量或者命令包时，其定义体（“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">define</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”和“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">endef</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”之间的内容）会被完整的展开到</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">中引用此变量的地方（包含定义体中的注释行）；</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">在引用此变量的地方对所有的定义体进行处理，决定是注释还是有效内容。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">中的变量可以和</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">C</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">语言中的宏（实质一样）一样来理解。对一个变量引用的地方</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">所做的就是将这个变量根据定义进行基于文本的展开，展开变量的过程不涉及到任何变量的具体含义和功能分析。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
&nbsp;</span></p>
<h2><a name="_gnu_make_3.2"><span lang="EN-US" style="font-size: 14.0pt"><b>3.2 </b>makefile</span><span style="font-size: 14.0pt; font-family: 楷体_GB2312">文件的命名</span></a></h2>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
默认的情况下，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">会在工作目录（执行</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的目录）下按照文件名顺序寻找</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件读取并执行，查找的文件名顺序为：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">GNUmakefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
通常应该使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”或者“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”作为一个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的文件名（我们推荐使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”，首字母大写而比较显著，一般在一个目录中和当前目录的一些重要文件（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">README,Chagelist</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">等）靠近，在寻找时会比较容易的发现它）。而“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">GNUmakefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”是我们不推荐使用的文件名，因为以此命名的文件只有“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">GNU 
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”才可以识别，而其他版本的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序只会在工作目录下“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”和“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”这两个文件。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">如果</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序在工作目录下无法找到以上三个文件中的任何一个，它将不读取任何其他文件作为解析对象。但是根据</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">隐含规则的特性，我们可以通过命令行指定一个目标，如果当前目录下存在符合此目标的依赖文件，那么这个命令行所指定的目标将会被创建或者更新，参见注释
。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">当</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件的命名不是这三个任何一个时，需要通过</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">-f</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”或者“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">--file</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”选项来指定</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">读取的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件。给</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">指定</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件的格式为：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">-f 
NAME</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”或者“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">—file=NAME</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”，它指定文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">NAME</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”作为执行</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">时读取的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件。也可以通过多个“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">-f</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”或者“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">--file</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”选项来指定多个需要读取的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件，多个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件将会被按照指定的顺序进行连接并被</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">解析执行。当通过“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">-f</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”或者“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">--file</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”指定</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">读取</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的文件时，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">就不再自动查找这三个标准命名的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
&nbsp;</span></p>
<div style="mso-element: para-border-div; mso-border-top-alt: solid black .5pt; border-left: medium none; border-right: medium none; border-top: 1.0pt solid black; border-bottom: medium none; padding-left: 0pt; padding-right: 0pt; padding-top: 1.0pt; padding-bottom: 0pt">
	<p class="a"><b>
	<span style="font-size: 10.5pt; line-height: 150%; font-family: 楷体_GB2312">
	注释：通过命令指定目标使用</span><span lang="EN-US" style="font-size: 10.5pt; line-height: 150%">make</span><span style="font-size: 10.5pt; line-height: 150%; font-family: 楷体_GB2312">的隐含规则：</span></b></div>
<p class="MsoBodyTextFirstIndent" style="text-indent: 21.1pt"><b>
<span style="font-family: 楷体_GB2312">当前目录下不存在以</span></b><span style="font-family: 楷体_GB2312">“</span><b><span lang="EN-US">GNUmakefile</span><span style="font-family: 楷体_GB2312">”、“</span><span lang="EN-US">makefile</span><span style="font-family: 楷体_GB2312">”、“</span><span lang="EN-US">Makefile</span><span style="font-family: 楷体_GB2312">”命名的任何文件，</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<b><span lang="EN-US">1.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family: 楷体_GB2312">当前目录下存在一个源文件</span><span lang="EN-US">foo.c</span><span style="font-family: 楷体_GB2312">的，我们可以使用“</span><span lang="EN-US">make 
foo.o</span><span style="font-family: 楷体_GB2312">”来使用</span><span lang="EN-US">make</span><span style="font-family: 楷体_GB2312">的隐含规则自动生成</span><span lang="EN-US">foo.o</span><span style="font-family: 楷体_GB2312">。当执行“</span><span lang="EN-US">make 
foo.o</span><span style="font-family: 楷体_GB2312">”时。我们可以看到其执行的命令为：</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 84.35pt"><b>
<span lang="EN-US">cc –c –o foo.o foo.c</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 42.15pt"><b>
<span style="font-family: 楷体_GB2312">之后，</span><span lang="EN-US">foo.o</span><span style="font-family: 楷体_GB2312">将会被创建或者更新。</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<b><span lang="EN-US">2.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family: 楷体_GB2312">如果当前目录下没有</span><span lang="EN-US">foo.c</span><span style="font-family: 楷体_GB2312">文件时，就是</span><span lang="EN-US">make</span><span style="font-family: 楷体_GB2312">对</span><span lang="EN-US">.o</span><span style="font-family: 楷体_GB2312">文件目标的隐含规则中依赖文件不存在。如果使用命令“</span><span lang="EN-US">make 
foo.o</span><span style="font-family: 楷体_GB2312">”时，将回到到如下提示：</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 84.35pt"><b>
<span lang="EN-US">make: *** No rule to make target ‘foo.o’. Stop.</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<b><span lang="EN-US">3.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family: 楷体_GB2312">如果直接使用命令“</span><span lang="EN-US">make</span><span style="font-family: 楷体_GB2312">”时，得到的提示信息如下：</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 63.25pt; margin-left: 18.0pt">
<b><span lang="EN-US">make: *** No targets specified and no makefile found. Stop</span></b><span lang="EN-US">.</span></p>
<div style="mso-element: para-border-div; mso-border-top-alt: solid black .5pt; border-left: medium none; border-right: medium none; border-top: 1.0pt solid black; border-bottom: medium none; padding-left: 0pt; padding-right: 0pt; padding-top: 1.0pt; padding-bottom: 0pt">
	<p class="a"><span lang="EN-US">&nbsp;</span></div>
<h2><a name="_gnu_make_3.3"><b><span lang="EN-US" style="font-size: 14.0pt">3.3 </span></b><span style="font-size: 14.0pt; font-family: 楷体_GB2312">
包含其它</span><b><span lang="EN-US" style="font-size: 14.0pt">makefile</span></b><span style="font-size: 14.0pt; font-family: 楷体_GB2312">文件</span></a></h2>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
本节我们讨论如何在一个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">中包含其它的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">中包含其它文件的关键字是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”，和</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">C</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">语言对头文件的包含方式一致。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”指示符告诉</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">暂停读取当前的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">，而转去读取“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”指定的一个或者多个文件，完成以后再继续当前</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的读取。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">中指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”书写在独立的一行，其形式如下：</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">include 
FILENAMES...</span></i></b></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
&nbsp;</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b><i>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
FILENAMES</span></i></b><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">是</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">shell</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">所支持的文件名（可以使用通配符）。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”所在的行可以一个或者多个空格（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序在处理时将忽略这些空格）开始，切忌不能以</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">[Tab]</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">字符开始（如果一行以</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">[Tab]</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">字符开始</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序将此行作为一个命令行来处理）。指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”和文件名之间、多个文件之间使用空格或者</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">[Tab]</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">键隔开。行尾的空白字符在处理时被忽略。使用指示符包含进来的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">中，如果存在变量或者函数的引用。它们将会在包含它们的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">中被展开。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
来看一个例子，存在三个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">.mk</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件，“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">$(bar)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”被扩展为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">bish 
bash</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”。则</span></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">include foo 
*.mk $(bar)</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.6pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></i></b></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">等价于</span></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">include foo 
a.mk b.mk c.mk bish bash</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序在处理指示符</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">时，将暂停对当前使用指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件的读取，而转去依此读取由“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”指示符指定的文件列表。直到完成所有这些文件以后再回过头继续读取指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”所在的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
通常指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”用在以下场合：</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
1.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
有多个不同的程序，由不同目录下的几个独立的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">来描述其创建或者更新规则。它们需要使用一组通用的变量定义或者模式规则。通用的做法是将这些共同使用的变量或者模式规则定义在一个文件中（没有具体的文件命名限制），在需要使用的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">中使用指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”来包含此文件。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
2.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
当根据源文件自动产生依赖文件时；我们可以将自动产生的依赖关系保存在另外一个文件中，主</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">使用指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”包含这些文件。这样的做法比直接在主</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">中追加依赖文件的方法要明智的多。其它版本的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">已经使用这种方式来处理。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
如果指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”指定的文件不是以斜线开始（绝对路径，如</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">/usr/src/Makefile...</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">），而且当前目录下也不存在此文件；</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">将根据文件名试图在以下几个目录下查找：首先，查找使用命令行选项“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">-I</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”或者“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">--include-dir</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”指定的目录，如果找到指定的文件，则使用这个文件；否则依此搜索以下几个目录（如果其存在）：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">/usr/gnu/include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">/usr/local/include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”和“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">/usr/include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
当在这些目录下都没有找到“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”指定的文件时，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">将会提示一个包含文件未找到的告警提示，但是不会立刻退出。而是继续处理</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的内容。当完成读取所有的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件后，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">将试图使用规则来创建通过指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”指定的但未找到的文件，当不能创建它时（没有创建这个文件的规则），</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">将提示致命错误并退出。会输出类似如下错误提示：</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
&nbsp;</span></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">Makefile:</span><span style="font-size: 12.0pt; font-family: 楷体_GB2312">错误的行数：未找到文件名：提示信息（</span><span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">No 
such file or directory</span><span style="font-size: 12.0pt; font-family: 楷体_GB2312">）</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">Make</span><span style="font-size: 12.0pt; font-family: 楷体_GB2312">：</span><span lang="EN-US" style="font-size: 12.0pt; font-family: Arial"> 
*** No rule to make target ‘&lt;filename&gt;’. Stop</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.6pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></i></b></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
我们可使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">-include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”来代替“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”，忽略由于包含文件不存在或者无法创建时的错误提示（“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">-</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”的意思是告诉</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">，忽略此操作的错误。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">继续执行）。像下边那样：</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 41.05pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
<b><i><span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">-include 
FILENAMES...</span></i></b></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
&nbsp;</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
使用这种方式时，当所要包含的文件不存在时不会有错误提示、</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">也不会退出；除此之外，和第一种方式效果相同。以下是<b>这两种方式的比较：</b></span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">使用“</span><b><i><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include 
FILENAMES...</span></i></b><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序处理时，如果“</span><b><i><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">FILENAMES</span></i></b><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”列表中的任何一个文件不能正常读取而且不存在一个创建此文件的规则时</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序将会提示错误并退出。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">使用“</span><b><i><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">-include 
FILENAMES...</span></i></b><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”的情况是，当所包含的文件不存在或者不存在一个规则去创建它，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序会继续执行，只有在因为</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的目标的规则不存在时，才会提示致命错误并退出。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
为了和其它的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序进行兼容。也可以使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">sinclude</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”来代替“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">-include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">GNU</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">所支持的方式）。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
&nbsp;</span></p>
<h2><a name="_gnu_make_3.4"><b><span lang="EN-US" style="font-size: 14.0pt">1.4<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><span style="font-size: 14.0pt; font-family: 楷体_GB2312">变量</span><span style="font-size: 14.0pt">
<b><span lang="EN-US">MAKEFILES</span></b></span></a></h2>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
如果当前环境定义了一个“</span><b><i><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">MAKEFILES</span></i></b><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”的环境变量，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">执行时首先将此变量的值作为需要读入的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件，多个文件之间使用空格分开。类似使用指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”包含其它</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件一样，如果文件名非绝对路径而且当前目录也不存在此文件，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">会在一些默认的目录去寻找。此情况和使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”的区别：</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
1.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
环境变量指定的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件中的“目标”不会被作为</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">执行的“终极目标”。就是说，这些文件中所定义规则的目标，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">不会将其作为“终极目标”来看待。如果在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的工作目录下没有一个名为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”或者“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">GNUmakefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”的文件，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">同样会提示“</span><b><i><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make: 
*** No targets specified and no makefile found. Stop.</span></i></b><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”；而在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的工作目录下存在这样一个文件（“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”或者“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">GNUmakefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”），那么</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">执行时的“终极目标”就是当前目录下这个文件中所定义的“终极目标”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
2.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
环境变量所定义的文件列表，在执行</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">时，如果不能找到其中某一个文件（不存在或者无法创建）。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">不会提示错误，也不退出。就是说环境变量“</span><b><i><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">MAKEFILES</span></i></b><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”定义的包含文件是否存在不会导致</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">错误（这是比较隐蔽的地方）。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
3.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">在执行时，首先读取的是环境变量“</span><b><i><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">MAKEFILES</span></i></b><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”所指定的文件列表，之后才是工作目录下的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件，“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”所指定的文件是在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">发现此关键字的时、暂停正在读取的文件而转去读取“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”所指定的文件。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">变量“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">MAKEFILES</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”主要用在“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”的递归调用过程中的的通信。实际应用中很少设置此变量。一旦设置了此变量，在多层</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">调用时；由于每一级</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">都会读取“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">MAKEFILES</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”变量所指定的文件，这样可能导致执行的混乱（可能不是你想看到的执行结果）。不过，我们可以使用此环境变量来指定一个定义通用的“隐含规则”和用的变量的文件，比如设置默认搜索路径；通过这种方式设置的“隐含规则”和定义的变量可以被任何</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">进程使用（有点象</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">C</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">语言中的全局变量）。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">也有人想让</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">login</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序自动的在自己的工作环境中设置此环境变量，编写的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">建立在此环境变量的基础上。此想法可以肯定地说不是一个好主意。规劝大家千万不要这么干，否则你所编写的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">在其人的工作环境中肯定不能正常工作。因为别人的工作环境中可能没有设置相同的环境变量“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">MAKEFILES</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
推荐的做法实：在需要包含其它</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件时使用指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”来实现。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
&nbsp;</span></p>
<h2><a name="_gnu_make_3.5"><span lang="EN-US" style="font-size: 14.0pt"><b>3.5 </b></span>
<span style="font-size: 14.0pt; font-family: 楷体_GB2312">变量</span><span style="font-size: 14.0pt">
<b><span lang="EN-US">MAKEFILE_LIST</span></b></span></a></h2>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序在读取多个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件时，包括由环境变量“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">MAKEFILES</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”指定、命令行指、当前工作下的默认的以及使用指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”指定包含的，在对这些文件进行解析执行之前</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">读取的文件名将会被自动的追加到变量“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">MAKEFILE_LIST</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”的定义域中。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
这样我们就可以通过测试此变量的最后一个字来得知当前</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序正在处理的是具体的那个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件。具体地说就是一个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件中当使用指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”包含另外一个文件之后，变量“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">MAKEFILE_LIST</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”的最后一个只可能是指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”指定所要包含的那个文件的名字。如果一个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的内容如下：</span></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">name1 := $(word 
$(words $(MAKEFILE_LIST)),$(MAKEFILE_LIST))</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">include inc.mk</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">name2 := $(word 
$(words $(MAKEFILE_LIST)),$(MAKEFILE_LIST))</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">all:</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;&nbsp;&nbsp; @echo name1 
= $(name1)</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;&nbsp;&nbsp; @echo name2 
= $(name2)</span></i></b></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">执行</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">，则看到的将是如下的结果：</span></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">name1 = 
Makefile</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">name2 = inc.mk</span></i></b></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
此例子中涉及到了</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的函数的和变量定义的方式，这些将在后续的章节中有详细的讲述。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
&nbsp;</span></p>
<h2><a name="_gnu_make_3.6"><b><span lang="EN-US" style="font-size: 14.0pt">3.6 </span></b>
<span style="font-size: 14.0pt; font-family: 楷体_GB2312">其他特殊变量</span></a></h2>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
GNU make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">支持一个特殊的变量，此变量不能通过任何途经给它赋值。此变量展开以后是一个特定的值。第一个重要的特殊的变量是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">.VARIABLES</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”。它被展开以后是此引用点之前、</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件中所定义的所有全局变量列表。包括：空变量（未赋值的变量）和</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的内嵌变量，但不包含目标指定的变量，目标指定变量值在特定目标的上下文有效。</span></p>
<h2><a name="_gnu_make_3.7"><b><span lang="EN-US" style="font-size: 14.0pt">3.7 makefile</span></b><span style="font-size: 14.0pt; font-family: 楷体_GB2312">文件<b>的</b>重建</span></a></h2>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">有时，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">可由其它文件生成，比如</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">RCS</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">或</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">SCCS</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件。如果</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">由其它文件重建，那么在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">开始解析</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">时需要读取的是更新后的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">、而不是那个没有更新的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的处理过程是这样的：</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">在读入所有</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件之后，首先将所读取的每个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">作为一个目标，试着去更新它。如果存在一个更新特定</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件明确规则或者隐含规则，则去更新这个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件。在完成对所有的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件的更新检查动作之后，如果之前所读取的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件已经被更新，那么</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">就清除本次执行的状态重新读取一遍所有的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件（此过程中，同样在读取完成以后也会去试图更新所有的已经读取的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件，但是一般这些文件不会再次被重建，因为它们在时间戳上已经是最新的）。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
实际应用中，我们会很明确的了解我们的那些</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件不需要重建。出于</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">效率的考虑，我们可以采用一些办法来避免</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">在执行过程时查找重建</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的隐含规则。例如我们可以书写一个明确的规则，将</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件作为目标，命令为空。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">规则中，如果使用一个没有依赖只有命令行的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial"><span lang="EN-US" style="font-family: 楷体_GB2312">双冒号规则</span></span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">去更新一个文件，那么每次执行</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">时，此规则的目标文件将会被无条件的更新。而假如此规则的目标文件是一个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件，那么在执行</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">时，将会导致这个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件被无条件更新，时</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的执行陷入到一个死循环中（此</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件被不断的更新、重新读取、更新再重新读取的过程）。为了防止进入此循环，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">在遇到一个目标是</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件的双冒号规则时，将忽略对这个规则的执行（其中包括了使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">MAKEFILES</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”指定、命令行选项指定、指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”指定的需要</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">读取的所有</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件中定义的这一类双冒号规则）。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">执行</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">时，如果没有使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">-f</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">--file</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">）”选项指定一个文件，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序将读取缺省的文件。和使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">-f</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">--file</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">）”选项不同，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">无法确定工作目录下是否存在缺省名称的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件。如果缺省</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件不存在，但可以通过一个规则来创建它（此规则是隐含规则），则会自动创建缺省</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件，之后重新读取它并开始执行。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
因此，如果不存在缺省</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">将按照搜索</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件的名称顺序去创建它，直到创建成功或者超越其缺省的命名顺序。需要明确的一点是：执行</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">时，如果不能成功地创建其缺省的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件，并不一定会导致错误。运行</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">时一个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件并不是必需的。（关于这一点大家会在后续的阅读过程中体会到）</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">当使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">-t</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">--touch</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">）”选项来对</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">目标文件进行时间戳更新时，对于哪些</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件的目标是无效的。就是说即使执行</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">时使用了选项“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">-t</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”，那些目标是</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件的规则同样也会被</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">执行（而其它的规则不会被执行，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">只是简单的更新规则目标文件的时间戳）；类似还有选项“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">-q</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">—question</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">）”和“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">-n</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">—just-print</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">）</span><span style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
”，这主要是因为一个过时的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件对其它目标的重建规则在当前看来可能是错误的。正因为如此，执行命令“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make 
–f mfile –n foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”首先会试图重建“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">mfile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件”、并重新读取它，之后会打印出更新目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”规则中所定义的命令但不执行此命令。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
在这种情况下，如果我们不希望重建</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件。那么我们就需要在执行</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">时，在命令行中将这个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件中为一个最终目的，这样“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">–t</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”和其它的选项就对这个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件的目标有效，防止执行这个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">作为目标的规则。同样，命令“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make 
–f mfile –n mfile foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”会读取文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">mfile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”，打印出重建文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">mfile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”的命令、重建“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”的命令而实际不去执行此命令。并且所打印的用于更新“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”目标的命令是选项“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">-f</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”指定的、没有被重建的“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">mfile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”文件中所定义的命令。</span></p>
<h2><a name="_gnu_make_3.8"><b><span lang="EN-US" style="font-size: 14.0pt">3.8 </span></b><span style="font-size: 14.0pt; font-family: 楷体_GB2312">重载另外一个</span><b><span lang="EN-US" style="font-size: 14.0pt">makefile</span></b></a></h2>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
有些情况下存在两个比较类似的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件。其中一个（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile-A</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">）需要使用另外一个文件（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile-B</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">）中所定义的变量和规则。我们可以在“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile-A</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”中使用指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”来包含“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">mkaefile-B</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”来达到目的，这种情况下，如果两个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件中存在相同目标，而其描述规则中使用不同的命令。相同目标有两个不同的规则命令，这是</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">所不允许的。遇到这种情况，使用指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”显然是行不通的。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">GNU 
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">提供另外一种途径来达到此目的。具体的做法如下：</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
在需要包含的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile-A</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">）中，我们可以使用一个称之为“所有匹配模式”的规则来描述在“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile-A</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”中没有明确定义的目标，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">将会在给定的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件中寻找没有在当前</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">中给出的目标更新规则。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
看一个例子，如果存在一个命名为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件，其中描述目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”的规则和其他的一些规，我们也可以书写一个内容如下命名为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">GNUmakefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”的文件。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">#sample 
GNUmakefile</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">foo:</span></i></b></p>
<p class="MsoNormal" style="text-indent: 65.3pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">frobnicate &gt; 
foo</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">%: force</span></i></b></p>
<p class="MsoNormal" style="text-indent: 65.3pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">@$(MAKE) -f 
Makefile $@</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">force: ;</span></i></b></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
&nbsp;</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">执行命令“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make 
foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">将使用工作目录下命名为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">GNUmakefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”的文件并执行目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”所在的规则，创建它的命令是：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">frobnicate 
&gt; foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”。如果我们执行另外一个命令“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make 
bar</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”，</span><span style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">GUNmakefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”中没有此目标的更新规则。那么，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">将会使用“所有匹配模式”规则，执行命令“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">$(MAKE) 
-f Makefile bar</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”。如果文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”中存在此目标更新规则的定义，那么这个规则会被执行。此过程同样适用于其它</span><span style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">GNUmakefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”中没有给出的目标更新规则。此方式的灵活之处在于：如果在“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”文件中存在同样一一个目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”的重建规则，由于</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">执行时首先读取文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">GUNmakefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”并在其中能够找到目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”的重建规则，所以</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">就不会去执行这个“所有模式匹配规则”（上例中的目标是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”的规则）。这样就避免了使用指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”包含一个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件时所带来的目标规则的重复定义问题。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
此种方式，模式规则的模式只使用了单独的“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”（我们才称他为“所有模式匹配规则”），它可以匹配任何一个目标；它的依赖是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">force</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”，保证了即使目标文件已经存在也会执行这个规则（文件已存在时，需要根据它的依赖文件的修改情况决定是否需要重建这个目标文件）；“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">force</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”规则中使用空命令是为了防止</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序试图寻找一个规则去创建目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">force</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”时，又使用了模式规则“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">%: 
force</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”而陷入无限循环。</span></p>
<h2><a name="_gnu_make_3.9"><b><span lang="EN-US" style="font-size: 14.0pt">3.9 make</span></b><span style="font-size: 14.0pt; font-family: 楷体_GB2312">如何解析</span><b><span lang="EN-US" style="font-size: 14.0pt">makefile</span></b><span style="font-size: 14.0pt; font-family: 楷体_GB2312">文件</span></a></h2>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
GUN make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的执行过程分为两个阶段。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
第一阶段：读取所有的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件（包括“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">MAKIFILES</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”变量指定的、指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”指定的、以及命令行选项“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">-f(--file)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”指定的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件），内建所有的变量、明确规则和隐含规则，并建立所有目标和依赖之间的依赖关系结构链表。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
在第二阶段：根据第一阶段已经建立的依赖关系结构链表决定哪些目标需要更新，并使用对应的规则来重建这些目标。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">理解</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">执行过程的两个阶段是很重要的。它能帮助我们更深入的了解执行过程中变量以及函数是如何被展开的。变量和函数的展开问题是书写</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">时容易犯错和引起大家迷惑的地方之一。本节将对这些不同的结构的展开阶段进行简单的总结（明确变量和函数的展开阶段，对正确的使用变量非常有帮助）。首先，明确以下基本的概念；在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">执行的第一阶段中如果变量和函数被展开，那么称此展开是“立即”的，此时所有的变量和函数被展开在需要构建的结构链表的对应规则中（此规则在建立链表是需要使用）。其他的展开称之为“延后”的。这些变量和函数不会被“立即”展开，而是直到后续某些规则须要使用时或者在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">处理的第二阶段它们才会被展开。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
可能现在讲述的这些还不能完全理解。不过没有关系，通过后续章节内容的学习，我们会一步一步的熟悉</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的执行过程。学习过程中可以回过头来参考本节的内容。相信在看完本书之后，会对</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的整个过程有全面深入的理解。</span></p>
<h3><a name="_gnu_make_3.9.1"><span lang="EN-US">3.9.1 </span><span style="font-family: 楷体_GB2312">变量取值</span></a></h3>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
变量定义解析的规则如下：</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">IMMEDIATE = 
DEFERRED</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">IMMEDIATE ?= 
DEFERRED</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">IMMEDIATE := 
IMMEDIATE</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">IMMEDIATE += 
DEFERRED or IMMEDIATE</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">define 
IMMEDIATE</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DEFERRED</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">Endef</span></i></b></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
&nbsp;</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
当变量使用追加符（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">+=</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">）时，如果此前这个变量是一个简单变量（使用</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial"> 
:=</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">定义的）则认为它是立即展开的，其它情况时都被认为是“延后”展开的变量。</span></p>
<h3><a name="_gnu_make_3.9.2"><span lang="EN-US">3.9.2 </span><span style="font-family: 楷体_GB2312">条件语句</span></a></h3>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
所有使用到条件语句在产生分支的地方，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">程序会根据预设条件将正确地分支展开。就是说条件分支的展开是“立即”的。其中包括：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">ifdef</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">ifeq</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">ifndef</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”和“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">ifneq</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”所确定的所有分支命令。</span></p>
<h3><a name="_gnu_make_3.9.3"><span lang="EN-US">3.9.3 </span><span style="font-family: 楷体_GB2312">规则的定义</span></a></h3>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
所有的规则在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">执行时，都按照如下的模式展开：</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">IMMEDIATE : 
IMMEDIATE ; DEFERRED</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">DEFERRED</span></i></b></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
&nbsp;</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
其中，规则中目标和依赖如果引用其他的变量，则被立即展开。而规则的命令行中的变量引用会被延后展开。此模板适合所有的规则，包括明确规则、模式规则、后缀规则、静态模式规则。</span></p>
<h2><a name="_gnu_make_3.10"><b><span lang="EN-US" style="font-size: 14.0pt">3.10 </span></b><span style="font-size: 14.0pt; font-family: 楷体_GB2312">总结</span></a></h2>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">的执行过程如下：</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
1.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
依次读取变量“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">MAKEFILES</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”定义的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件列表</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
2.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
读取工作目录下的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件（根据命名的查找顺序“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">GNUmakefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”，“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”，“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”，首先找到那个就读取那个）</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
3.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
依次读取工作目录</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件中使用指示符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">include</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">”包含的文件</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
4.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
查找重建所有已读取的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件的规则（如果存在一个目标是当前读取的某一个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件，则执行此规则重建此</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">文件，完成以后从第一步开始重新执行）</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
5.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
初始化变量值并展开那些需要立即展开的变量和函数并根据预设条件确定执行分支</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
6.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
根据“终极目标”以及其他目标的依赖关系建立依赖关系链表</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
7.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
执行除“终极目标”以外的所有的目标的规则（规则中如果依赖文件中任一个文件的时间戳比目标文件新，则使用规则所定义的命令重建目标文件）</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: -21.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial">
8.<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312">
执行“终极目标”所在的规则</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; line-height: 150%; text-autospace: ideograph-numeric ideograph-other; margin-left: 18.0pt">
<span lang="EN-US" style="font-size: 9.0pt; line-height: 150%; font-family: Arial">
&nbsp;</span></p>
<div style="mso-element: para-border-div; mso-border-top-alt: solid black .5pt; border-left: medium none; border-right: medium none; border-top: 1.0pt solid black; border-bottom: medium none; padding-left: 0pt; padding-right: 0pt; padding-top: 1.0pt; padding-bottom: 0pt">
	<p class="a"><span style="line-height: 150%; font-family: 楷体_GB2312">
	执行一个规则的过程：</span></p>
	<p class="a" style="text-indent: 15.4pt">
	<span style="line-height: 150%; font-family: 楷体_GB2312">
	对于一个存在的规则（明确规则和隐含规则）首先，</span><span lang="EN-US" style="line-height: 150%">make</span><span style="line-height: 150%; font-family: 楷体_GB2312">比较目标文件和所有的依赖文件的时间戳。如果目标的时间戳比所有依赖文件的时间戳更新（依赖文件在上一次执行</span><span lang="EN-US" style="line-height: 150%">make</span><span style="line-height: 150%; font-family: 楷体_GB2312">之后没有被修改），那么什么也不做。否则（依赖文件中的某一个或者全部在上一次执行</span><span lang="EN-US" style="line-height: 150%">make</span><span style="line-height: 150%; font-family: 楷体_GB2312">后已经被修改过），规则所定义的重建目标的命令将会被执行。这就是</span><span lang="EN-US" style="line-height: 150%">make</span><span style="line-height: 150%; font-family: 楷体_GB2312">工作的基础，也是其执行规制所定义命令的依据。（后续讨论规则时将会对此详细地说明）</span></div>
<div style="mso-element: para-border-div; mso-border-bottom-alt: solid black .5pt; border-left: medium none; border-right: medium none; border-top: medium none; border-bottom: 1.0pt solid black; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; padding-bottom: 1.0pt">
	<p class="a0"><span lang="EN-US">&nbsp;</span></div>

	<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: #222222">
	<hr size="1" width="100%" align="center"></span>

	<span style="font-size: 12.0pt; font-family: Arial; ">
	<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
	<font face="楷体_GB2312" size="4"><a href="make-04.html">下一章</a>
	<a href="make-02.html">上一章</a> <a href="index.html#content">目录</a></font></p>
	</span>
</body>

</html>
